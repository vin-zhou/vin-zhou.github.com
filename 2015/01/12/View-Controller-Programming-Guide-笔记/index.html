
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>View Controller Programming Guide 笔记 | 没有什么能够阻挡</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Vin Zhou">
    

    
    <meta name="description" content="不要给Window添加直接添加View， 而是添加 view controller，controller关联的View将会自动被添加上。这是因为controller会自动管理view在需要时被加载，在特定条件下被释放，即controller起到了重要的资源管理的作用。 每个View都只被一个view controller 管理，每个view controller处理部分数据，因此，control">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="View Controller Programming Guide 笔记">
<meta property="og:url" content="http://vin-zhou.github.com/2015/01/12/View-Controller-Programming-Guide-笔记/index.html">
<meta property="og:site_name" content="没有什么能够阻挡">
<meta property="og:description" content="不要给Window添加直接添加View， 而是添加 view controller，controller关联的View将会自动被添加上。这是因为controller会自动管理view在需要时被加载，在特定条件下被释放，即controller起到了重要的资源管理的作用。 每个View都只被一个view controller 管理，每个view controller处理部分数据，因此，control">
<meta property="og:updated_time" content="2016-12-15T12:30:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="View Controller Programming Guide 笔记">
<meta name="twitter:description" content="不要给Window添加直接添加View， 而是添加 view controller，controller关联的View将会自动被添加上。这是因为controller会自动管理view在需要时被加载，在特定条件下被释放，即controller起到了重要的资源管理的作用。 每个View都只被一个view controller 管理，每个view controller处理部分数据，因此，control">

    
    <link rel="alternative" href="/atom.xml" title="没有什么能够阻挡" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="没有什么能够阻挡" title="没有什么能够阻挡"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="没有什么能够阻挡">没有什么能够阻挡</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:vin-zhou.github.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/01/12/View-Controller-Programming-Guide-笔记/" title="View Controller Programming Guide 笔记" itemprop="url">View Controller Programming Guide 笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Vin Zhou" target="_blank" itemprop="author">Vin Zhou</a>
		
  <p class="article-time">
    <time datetime="2015-01-12T01:35:20.000Z" itemprop="datePublished"> 发表于 Jan 12 2015</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			
		
		</div>
		
		<ol>
<li>不要给Window添加直接添加View， 而是添加 view controller，controller关联的View将会自动被添加上。这是因为controller会自动管理view在需要时被加载，在特定条件下被释放，即controller起到了重要的资源管理的作用。</li>
<li>每个View都只被一个view controller 管理，每个view controller处理部分数据，因此，controller间需要communicate with other以显示整个功能。</li>
<li><p>View controller 通常可被划分为两类：content view contrllers 和 container view controllers。<br>3.1  content view controller<br>在同一个view 层次结构中， content view controller和其管理的view要是一对一的。<br>（1） table view controller</p>
<p>3.2 container view conroller<br>container view controller包含了由其他view controllers所拥有的content。这些view controllers 显示地成为了container的孩子。contianer间也可构成父子关系。由此也构成了一个view controller的层次结构。<br>container view contrller同时也可以像content view controller一样， 添加view（由其子controller所拥有）到自己的view层次结构上container来决定何时添加以及size如何。<br>（1）Navigation conroller<br>（2）Tab bar contoller<br>（3）Split view controller<br>（4）Page view controller</p>
</li>
<li><p>Communcation between source and destination view controllers（控制流模型）</p>
<ul>
<li>由目标视图控制器提供properites供源视图控制器设置传参；</li>
<li>如果目标视图控制器想给源视图控制器传参，则通常使用代理。首先在目标视图控制器中定义一个delegate成员，由源视图控制器实现该代理的协议，然后将自己赋值给目标视图控制器的变量，再由目标视图控制器通过该变量传值给源视图控制器。</li>
<li>这样做的好处是， 目标视图控制器由源视图控制器来驱动，并尽可能地较少获知源视图控制器的内容（只知道代理方法）。因此提高了可复用性。</li>
</ul>
</li>
<li><p>使用storyboard<br>segue的类型：</p>
<ul>
<li>push segue: 将目标视图控制器push到navigation控制器栈中；</li>
<li>modal segue: present目标视图控制器；</li>
<li>popover segue: 在一个popover中显示目标视图控制器；</li>
<li>custom segue: 自定义</li>
</ul>
</li>
<li><p>Storyboard就像在讲一个story，其上的controller多是通过segue触发或child-container关系存在的，构成了一幅连通图，因此在segue被触发或parent container被实例化之后才实例化；也有些controller没有连接在图上，其通过代码被调用和实例化。可以为controller和segue添加identifier string来唯一标识它。标识符对于通过代码被调用的segue和controller是必须的, 如下方法：<br><code>performSegueWithIdentifier:sender:</code>。</p>
</li>
<li><p>可以创建一个storyboard来维护所有的controller，也可以创建多个storyboard，其中一个通常被一直定义为主storyboard，iOS来自动加载（可以在配置中设置），其他的storyboard必须在程序中被显示地用代码来加载, 如<code>[UIStoryboard storyboardWithName:bundle:]</code>。</p>
</li>
<li><p>当主storyboard被设置后，程序加载时，iOS执行以下操作：</p>
<ol>
<li>初始化一个window;</li>
<li>加载主storyboard并初始化其initial view controller;</li>
<li>将此controller设置伟window的rootViewContoller，使window visible.</li>
</ol>
</li>
<li><p>手动实例化一个storyboard中的view controller:</p>
<ol>
<li>获得storyboard。如果该view controller与其他已加载的controller在同一个storyboard上，则可通过其.storyboard属性来获得storyboard;否则需使用UIStoryboard的类方法<code>storyboardWithName:bundle:</code>，传递文件名和可选的bundle参数来创建；</li>
<li>调用storyboard的<code>instantiateViewControllerWithIdentifer:</code>方法来加载在Interface Builder设定indentifier的该controller;或是<code>instantiateInitialViewController</code>来直接加载initial view controller；</li>
<li>设置这个新的view controller的属性</li>
<li>显示这个view controller, 有以下几种方式可供选择：<ul>
<li>设置其为一个window的root view controller</li>
<li>设置其为一个visible contrainer view controller的child</li>
<li>用另一个view contrller的present 方法将其显示出来</li>
<li>使用popover将其显示出来（仅适用于iPad）</li>
</ul>
</li>
</ol>
</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 加载一个新的storyboard</span></div><div class="line">- (<span class="built_in">UIWindow</span>*) windowFromStoryboard:(<span class="built_in">NSString</span>*)storyboardName onScreen:(<span class="built_in">UIScreen</span>*) screen</div><div class="line">&#123;</div><div class="line">	<span class="built_in">UIWindow</span> *window = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[screen bounds]];</div><div class="line">    window.screen = screen;</div><div class="line">    </div><div class="line">    <span class="built_in">UIStoryboard</span>* storyboard = [<span class="built_in">UIStoryboard</span> storyboardWithName:storyboardName bundle:<span class="literal">nil</span>];</div><div class="line">    MainViewController* mainViewController = [storyboard instantiateInitialViewController];</div><div class="line">    window.rootViewController = mainViewController;</div><div class="line">    </div><div class="line">    <span class="comment">// configure the new view controller here.</span></div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="keyword">return</span> window;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li><p>管理ViewControllers的资源</p>
<ol>
<li>区分所使用的各对象的生命周期，尽量使用懒加载；</li>
<li>当系统内存不足时，所有的 view controllers 将会自动手动收到一个 low-memory 警告, 因此需要在 view controllers 做好在 <code>didReceiveMemoryWarning</code> 方法中释放资源的准备.</li>
</ol>
<ul>
<li>Initializing a view controller<br>在初始化时，view controller 需只创建或加载需要贯穿整个生命周期的资源和对象，而不能创建view hierarchy或任何显示内容相关的对象。需在初始化方法中只关注用来实现关键行为的对象和数据。如果使用Interface Builder，archive 将会在 <code>initWithCoder:</code> 方法中加载，然后任何实现了 <code>awakeFromNib</code> 方法的对象，该方法将会被调用；如果通过program创建view controller，init方法将会被调用。Init 方法应该尽量简单，尽量在 <code>loadView</code> 方法中再对其 properties 进行配置。</li>
<li>在loadView方法中，view controller负责实例化 self.view 及 view hierarchy的 创建；然后在viewDidLoad方法中，可以得到已经创建好的view。如果使用auto layout来进行布局，应该实现 <code>viewWillLayoutSubviews</code>和<code>viewDidLayoutSubviews</code>方法来控制subviews在view hierarchy中的position 和 frames.</li>
</ul>
</li>
<li><p>ViewController调整subviews的操做<br>When the size of a view controller’s view changes, its subviews are repositioned to fit the new space available to them. The views in the controller’s view hierarchy perform most of this work themselves through the use of layout constraints and autoresizing masks. However, the view controller is also called at various points so that it can participate in the process. Here’s what happens:</p>
<ol>
<li>The view controller’s view is resized to the new size.</li>
<li>If autolayout is not in use, the views are resized according to their autoresizing masks.</li>
<li>The view controller’s viewWillLayoutSubviews method is called.</li>
<li>The view’s layoutSubviews method is called. If autolayout is used to configure the view hierarchy, itupdates the layout constraints by executing the following steps:<br> a. The view controller’s updateViewConstraints method is called.<br> b. The UIViewController class’s implementation of the updateViewConstraints method calls the view’s updateConstraints method.<br> c. After the layout constraints are updated, a new layout is calculated and the views are repositioned.</li>
<li>The view controller’s viewDidLayoutSubviews method is called.</li>
</ol>
</li>
<li></li>
</ol>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/技术/">技术</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/iOS/">iOS</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://vin-zhou.github.com/2015/01/12/View-Controller-Programming-Guide-笔记/" data-title="View Controller Programming Guide 笔记 | 没有什么能够阻挡" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/02/02/ARC-实践/" title="ARC 实践">
  <strong>上一篇：</strong><br/>
  <span>
  ARC 实践</span>
</a>
</div>


<div class="next">
<a href="/2014/12/31/iOS-文档学习路线/"  title="iOS 文档学习路线">
 <strong>下一篇：</strong><br/> 
 <span>iOS 文档学习路线
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2015/01/12/View-Controller-Programming-Guide-笔记/" data-title="View Controller Programming Guide 笔记" data-url="http://vin-zhou.github.com/2015/01/12/View-Controller-Programming-Guide-笔记/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/想法/" title="想法">想法<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/技术/" title="技术">技术<sup>42</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/iOS/" title="iOS">iOS<sup>35</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Xcode/" title="Xcode">Xcode<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Mac/" title="Mac">Mac<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Swift/" title="Swift">Swift<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Git/" title="Git">Git<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Markdown/" title="Markdown">Markdown<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Vim/" title="Vim">Vim<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/app-碎片整理/" title="app, 碎片整理">app, 碎片整理<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/开源/" title="开源">开源<sup>1</sup></a></li>
			
		
		</ul>
</div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">归档</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a><span class="archive-list-count">8</span></li></ul>
  </div>


  
  <div class="tagcloudlist">
    <p class="asidetitle">标签云</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Hexo/" style="font-size: 16.67px;">Hexo</a> <a href="/tags/Mac/" style="font-size: 13.33px;">Mac</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Swift/" style="font-size: 13.33px;">Swift</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Xcode/" style="font-size: 16.67px;">Xcode</a> <a href="/tags/app-碎片整理/" style="font-size: 10px;">app, 碎片整理</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/开源/" style="font-size: 10px;">开源</a>
    </div>
  </div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Vin. <br/>
			Life is so beautiful. Never too late to learn.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="Vin Zhou">Vin Zhou</a>
		
		
		</p>
		<p class="copyright">
		<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253589886'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1253589886%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"vin-zhou"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
